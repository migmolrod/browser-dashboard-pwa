---
sidebar_position: 4.0
title: Tasks
status: Draft
lastUpdated: 2025-11-17
---

import RequirementMetadata from "../../../src/components/RequirementMetadata";
// noinspection ES6UnusedImports
import PriorityLabel from "../../../src/components/PriorityLabel";
// noinspection ES6UnusedImports
import StatusLabel from "../../../src/components/StatusLabel";

<RequirementMetadata/>

# Tasks

## Overview

The Tasks bounded context provides lightweight personal task management with statuses, priorities, and due dates. It
handles the complete task lifecycle from creation to completion, while supplying task data to dashboard widgets and
enabling integration with the Calendar context for event creation.

**Bounded context code:** TSK\
**Related DMD section:** [Tasks (Supporting)](../../domain/bounded-contexts/tasks)

---

## Features

### Summary

| Feature Code | Feature Name              | Priority                                | Status                        |
|--------------|---------------------------|-----------------------------------------|-------------------------------|
| FR-TSK-001   | Task management           | <PriorityLabel priority="Must Have"/>   | <StatusLabel status="Draft"/> |
| FR-TSK-002   | Task status lifecycle     | <PriorityLabel priority="Must Have"/>   | <StatusLabel status="Draft"/> |
| FR-TSK-003   | Task priority management  | <PriorityLabel priority="Must Have"/>   | <StatusLabel status="Draft"/> |
| FR-TSK-004   | Due date management       | <PriorityLabel priority="Must Have"/>   | <StatusLabel status="Draft"/> |
| FR-TSK-005   | Task lists/sections       | <PriorityLabel priority="Should Have"/> | <StatusLabel status="Draft"/> |
| FR-TSK-006   | Task reordering           | <PriorityLabel priority="Should Have"/> | <StatusLabel status="Draft"/> |
| FR-TSK-007   | Task search and filtering | <PriorityLabel priority="Should Have"/> | <StatusLabel status="Draft"/> |
| FR-TSK-008   | Calendar integration      | <PriorityLabel priority="Should Have"/> | <StatusLabel status="Draft"/> |
| FR-TSK-009   | Task completion tracking  | <PriorityLabel priority="Must Have"/>   | <StatusLabel status="Draft"/> |

---

### FR-TSK-001: Task management

**Priority:** <PriorityLabel priority="Must Have"/>

**Description:**  
Users must be able to create, edit, and delete tasks. Each task consists of a title (required), optional description,
status, priority, and due date. Tasks are scoped to individual users and form the foundation of personal task
management.

**Preconditions:**

- User must be authenticated
- User must have a default task list (created on user registration)

**Postconditions:**

- Task is created/updated/deleted
- Task is associated with the user
- TaskCreated/TaskUpdated/TaskDeleted event is published

**Business rules:**

- Each task must have a non-empty title (1–200 characters)
- Description is optional and length-bounded (max 2000 characters)
- Each task has a unique TaskId
- Tasks belong to exactly one user (scoped by identity)
- The default status is "Todo" for new tasks
- The default priority is "Medium" for new tasks
- Tasks can be soft-deleted (moved to "Deleted" status) or permanently deleted

**User roles:**

- Authenticated User

**Related to:**

- Business Requirements: BR-001 (Portfolio Enhancement), BR-002 (User Productivity Enhancement), BR-005 (User Value
  Delivery)
- Domain Aggregates: Task (root or child of TaskList)
- Domain Events: TaskCreated, TaskUpdated, TaskDeleted, UserRegistered (consumed)

**Dependencies:**

- User Identity context (Conformist relationship)

**Acceptance criteria:**

- User can create a task with a title
- Task is assigned a unique TaskId
- Task is persisted with default status (Todo) and priority (Medium)
- TaskCreated event is published
- User can edit the task title and description
- TaskUpdated event is published
- User can delete a task
- Confirmation is required before permanent deletion
- TaskDeleted event is published
- Deleted task is removed from all views

**User stories:**

- US-TSK-001-001: Create a new task
- US-TSK-001-002: Edit a task
- US-TSK-001-003: Delete a task
- US-TSK-001-004: Create a task with a description

### Scenarios

##### Scenario 1: Create a new task ("happy path")

```gherkin
Given a user is viewing their task list  
When the user clicks "Add Task"  
And enters the title "Buy groceries"  
And confirms creation  
Then a new task is created with title "Buy groceries"  
And the task has default status "Todo"  
And the task has default priority "Medium"  
And a TaskCreated event is published  
And the task appears in the task list
```

##### Scenario 2: Create a task with the title exceeding maximum length

```gherkin
Given a user is creating a task  
When the user enters a title longer than 200 characters  
And attempts to save  
Then validation fails  
And an error message indicates the title is too long  
And the task is not created  
And no TaskCreated event is published
```

##### Scenario 3: Edit task

```gherkin
Given a user has a task with title "Old Title"  
When the user selects "Edit" on the task  
And changes the title to "New Title"  
And adds description "Important details"  
And confirms the changes  
Then the task is updated with new values  
And a TaskUpdated event is published  
And the task displays the new title and description
```

##### Scenario 4: Delete task

```gherkin
Given a user has a task in their list  
When the user selects "Delete" on the task  
Then a confirmation dialog appears  
And upon confirmation, the task is deleted  
And a TaskDeleted event is published  
And the task is removed from the list
```

##### Scenario 5: Cancel task deletion

```gherkin
Given a user initiates task deletion  
When the confirmation dialog is displayed  
And the user clicks "Cancel"  
Then the task is not deleted  
And no TaskDeleted event is published  
And the task remains in the list
```

##### Scenario 6: Create a task without a title

```gherkin
Given a user is creating a task  
When the user leaves the title field empty  
And attempts to save  
Then validation fails  
And an error message indicates the title is required  
And the task is not created  
And no TaskCreated event is published
```

##### Scenario 7: Initialize default task list on user registration

```gherkin
Given a new user has just registered  
When the system processes the UserRegistered event  
Then a default task list is automatically created for the user  
And the list is named "My Tasks" or similar  
And the user's task management is initialized
```

---

**Technical notes:**

- Task title and description should be sanitized to prevent XSS
- Consider implementing soft delete with "Deleted" status for recovery (future)
- Use optimistic locking for concurrent task updates
- Task IDs should be generated using a strongly typed identifier pattern
- Implement validation for title length and description length

**Open questions:**

- Should the deleted tasks be recoverable (soft delete with trash/recycle bin)?
- Should there be a character counter for title and description fields?

---

### FR-TSK-002: Task status lifecycle

**Priority:** <PriorityLabel priority="Must Have"/>

**Description:**  
Users must be able to change task status through a defined lifecycle. The status represents the current state of a task
and follows a typical workflow: Todo → In Progress → Done. Users can also revert tasks to previous states if needed.

**Preconditions:**

- User must be authenticated
- Task must exist

**Postconditions:**

- Task status is updated
- TaskStatusChanged event is published
- TaskCompleted event is published (if status changes to "Done")

**Business rules:**

- Valid statuses: Todo, In Progress, Done
- Each task has exactly one status at any time
- Status transitions are allowed in any direction (flexible workflow)
- Changing status to "Done" marks the task as completed
- Completion timestamp is recorded when status changes to "Done"
- Tasks can be reverted from "Done" to other statuses

**User roles:**

- Authenticated User

**Related to:**

- Business Requirements: BR-001 (Portfolio Enhancement), BR-002 (User Productivity Enhancement), BR-005 (User Value
  Delivery)
- Domain Aggregates: Task
- Domain Events: TaskStatusChanged, TaskCompleted

**Dependencies:**

- FR-TSK-001 (Task must exist)

**Acceptance criteria:**

- User can change task status via dropdown or button
- Valid status transitions are: Todo ↔ In Progress ↔ Done
- Status change is immediately persisted
- TaskStatusChanged event is published
- When status changes to "Done," TaskCompleted event is also published
- Completion timestamp is recorded for "Done" status
- Visual indicators show current status (color coding, icons)
- Completed tasks can be reverted to other statuses

**User stories:**

- US-TSK-002-001: Change task status to "In Progress"
- US-TSK-002-002: Mark a task as "Done"
- US-TSK-002-003: Revert a completed task to "Todo"

### Scenarios

##### Scenario 1: Change task status to "In Progress" ("happy path")

```gherkin
Given a user has a task with status "Todo"  
When the user clicks on the task status  
And selects "In Progress"  
Then the task status is updated to "In Progress"  
And a TaskStatusChanged event is published  
And the task displays with "In Progress" indicator
```

##### Scenario 2: Mark a task as "Done"

```gherkin
Given a user has a task with status "In Progress"  
When the user changes the status to "Done"  
Then the task status is updated to "Done"  
And a TaskStatusChanged event is published  
And a TaskCompleted event is published  
And the completion timestamp is recorded  
And the task displays with strike-through or completion indicator
```

##### Scenario 3: Quick complete via checkbox

```gherkin
Given a user has a task with status "Todo"  
When the user clicks the checkbox next to the task  
Then the task status immediately changes to "Done"  
And a TaskStatusChanged event is published  
And a TaskCompleted event is published  
And the task is visually marked as completed
```

##### Scenario 4: Revert completed task

```gherkin
Given a user has a task with status "Done"  
When the user changes the status back to "Todo"  
Then the task status is updated to "Todo"  
And a TaskStatusChanged event is published  
And the completion timestamp is cleared  
And the task displays without completion indicator
```

##### Scenario 5: Status persists across sessions

```gherkin
Given a user has changed a task status to "In Progress"  
When the user logs out and logs back in  
Then the task still shows status "In Progress"  
And the status change is persisted
```

---

**Technical notes:**

- Store completion timestamp when status changes to "Done"
- Implement optimistic UI updates for status changes
- Consider color coding: Todo (blue), In Progress (orange), Done (green)
- Ensure status transitions are atomic
- Consider implementing status history tracking (future)

**Open questions:**

- Should there be additional statuses (e.g., "Blocked," "Canceled")?
- Should status transitions be logged for audit purposes?

---

### FR-TSK-003: Task priority management

**Priority:** <PriorityLabel priority="Must Have"/>

**Description:**  
Users must be able to assign and change priority levels for tasks. Priority helps users focus on important tasks and
provides visual cues for task urgency.

**Preconditions:**

- User must be authenticated
- Task must exist

**Postconditions:**

- Task priority is updated
- TaskPriorityChanged event is published
- Task list is re-sorted (if sorted by priority)

**Business rules:**

- Valid priorities: Low, Medium, High
- Each task has exactly one priority at any time
- The default priority for new tasks is "Medium"
- Priority can be changed at any time regardless of status
- Priority is independent of status and due date

**User roles:**

- Authenticated User

**Related to:**

- Business Requirements: BR-001 (Portfolio Enhancement), BR-002 (User Productivity Enhancement), BR-005 (User Value
  Delivery)
- Domain Aggregates: Task
- Domain Events: TaskPriorityChanged

**Dependencies:**

- FR-TSK-001 (Task must exist)

**Acceptance criteria:**

- User can change task priority via dropdown or quick action
- Valid priorities are Low, Medium, High
- Priority change is immediately persisted
- TaskPriorityChanged event is published
- Visual indicators show priority (color, icon, or label)
- Tasks can be sorted/filtered by priority
- Priority persists across sessions

**User stories:**

- US-TSK-003-001: Change task priority to "High"
- US-TSK-003-002: Filter tasks by priority
- US-TSK-003-003: Sort tasks by priority

### Scenarios

##### Scenario 1: Change task priority ("happy path")

```gherkin
Given a user has a task with priority "Medium"  
When the user clicks on the priority indicator  
And selects "High"  
Then the task priority is updated to "High"  
And a TaskPriorityChanged event is published  
And the task displays with high-priority indicator
```

##### Scenario 2: Create a task with the default priority

```gherkin
Given a user is creating a new task  
When the user does not specify a priority  
And saves the task  
Then the task is created with priority "Medium"  
And a TaskCreated event is published
```

##### Scenario 3: Sort tasks by priority

```gherkin
Given a user has tasks with mixed priorities  
When the user selects "Sort by Priority"  
Then tasks are displayed in order: High, Medium, Low  
And within each priority, tasks maintain their original order
```

##### Scenario 4: Visual priority indicators

```gherkin
Given a user has tasks with different priorities  
When the user views the task list  
Then high-priority tasks display in red or with "!" icon  
And medium-priority tasks display in yellow or with neutral icon  
And low-priority tasks display in gray or with "↓" icon
```

##### Scenario 5: Priority persists across sessions

```gherkin
Given a user has set a task priority to "High"  
When the user logs out and logs back in  
Then the task still shows priority "High"  
And the priority change is persisted
```

---

**Technical notes:**

- Implement priority as enumeration (Low=1, Medium=2, High=3)
- Use color coding for visual distinction
- Consider allowing custom priority levels (future)
- Priority sorting should be stable (maintain secondary sort order)

**Open questions:**

- Should there be more granular priority levels (e.g., 1–5 scale)?
- Should priority be combined with a due date for smart sorting?

---

### FR-TSK-004: Due date management

**Priority:** <PriorityLabel priority="Must Have"/>

**Description:**  
Users must be able to set and modify due dates for tasks. Due dates provide deadlines and enable time-based
organization. The system should provide visual indicators for overdue, due today, and upcoming tasks.

**Preconditions:**

- User must be authenticated
- Task must exist

**Postconditions:**

- Task due date is updated
- TaskUpdated event is published
- Visual indicators reflect due date status

**Business rules:**

- Due date is optional
- If set, a due date must be a valid timestamp
- Due date can be in the past, present, or future
- Due date includes date only (no specific time) or date+time
- Tasks with due dates in the past are considered "overdue"
- Due date can be cleared (set to null)

**User roles:**

- Authenticated User

**Related to:**

- Business Requirements: BR-001 (Portfolio Enhancement), BR-002 (User Productivity Enhancement), BR-005 (User Value
  Delivery)
- Domain Aggregates: Task
- Domain Events: TaskUpdated

**Dependencies:**

- FR-TSK-001 (Task must exist)

**Acceptance criteria:**

- User can set a due date via a date picker
- User can choose date-only or date+time
- Due date is validated for valid format
- TaskUpdated event is published when a due date changes
- Visual indicators show due date status:
- Overdue (red)
- The due date is today (orange)
- The due date is soon (yellow, within 3 days)
- Future (default)
- User can clear the due date
- Tasks can be sorted/filtered by due date
- Overdue tasks are prominently highlighted

**User stories:**

- US-TSK-004-001: Set due date for a task
- US-TSK-004-002: View overdue tasks
- US-TSK-004-003: Clear due date
- US-TSK-004-004: Sort tasks by due date

### Scenarios

##### Scenario 1: Set a due date for a task ("happy path")

```gherkin
Given a user has a task without a due date  
When the user clicks "Set Due Date"  
And selects tomorrow's date from the date picker  
And confirms  
Then the due date is set to tomorrow  
And a TaskUpdated event is published  
And the task displays the due date
```

##### Scenario 2: Visual indicator for overdue task

```gherkin
Given a user has a task with due date in the past  
When the user views the task list  
Then the task is highlighted in red  
And displays "Overdue" label  
And shows the number of days overdue
```

##### Scenario 3: Visual indicator for task due today

```gherkin
Given a user has a task due today  
When the user views the task list  
Then the task is highlighted in orange  
And displays "Due Today" label
```

##### Scenario 4: Clear due date

```gherkin
Given a user has a task with a due date set  
When the user clicks "Clear Due Date"  
And confirms  
Then the due date is removed from the task  
And a TaskUpdated event is published  
And the task no longer displays a due date
```

##### Scenario 5: Sort tasks by due date

```gherkin
Given a user has tasks with various due dates  
When the user selects "Sort by Due Date"  
Then tasks are displayed in chronological order  
And overdue tasks appear first  
And tasks without due dates appear last
```

##### Scenario 6: Filter overdue tasks

```gherkin
Given a user has tasks with various due dates  
When the user selects "Show Overdue Tasks"  
Then only tasks with due dates in the past are displayed  
And the count of overdue tasks is shown
```

---

**Technical notes:**

- Store due date as ISO 8601 timestamp
- Handle timezone conversions for "due today" calculations
- Implement relative time display (e.g., "in 2 days," "3 days ago")
- Use a date picker library for a consistent UX
- Consider implementing recurring due dates (future)

**Open questions:**

- Should there be smart date input (e.g., "tomorrow", "next week")?
- Should reminders/notifications be triggered by due dates?

---

### FR-TSK-005: Task lists/sections

**Priority:** <PriorityLabel priority="Should Have"/>

**Description:**  
Users should be able to organize tasks into lightweight lists or sections (e.g., "Personal," "Work," "Shopping"). Lists
provide a simple grouping mechanism without the complexity of project management.

**Preconditions:**

- User must be authenticated
- User must have at least a default list

**Postconditions:**

- Task list/section is created/renamed/deleted
- Tasks are associated with lists
- List visibility affects task display

**Business rules:**

- Each user has a default list (created on registration)
- Users can create additional lists
- List names must be unique per user
- List names must be non-empty and length-bounded (1–100 characters)
- Tasks belong to exactly one list
- Deleting a list requires handling of contained tasks (move to default or delete)
- Empty lists can be deleted directly

**User roles:**

- Authenticated User

**Related to:**

- Business Requirements: BR-001 (Portfolio Enhancement), BR-002 (User Productivity Enhancement), BR-005 (User Value
  Delivery)
- Domain Aggregates: TaskList (optional root), Task
- Domain Events: TaskListCreated, TaskListRenamed, TaskListDeleted, TaskUpdated (when moved between lists)

**Dependencies:**

- FR-TSK-001 (Tasks must exist)

**Acceptance criteria:**

- User can create a new list with a unique name
- User can rename lists (except default)
- User can delete empty lists
- Deleting a non-empty list prompts for action (move tasks or delete)
- User can move tasks between lists
- Task list view shows lists in the sidebar or tabs
- Selecting a list filters tasks to that list only
- Task count per list is displayed

**User stories:**

- US-TSK-005-001: Create a new task list
- US-TSK-005-002: Move a task to a different list
- US-TSK-005-003: Delete a list
- US-TSK-005-004: Rename a list

### Scenarios

##### Scenario 1: Create a new task list ("happy path")

```gherkin
Given a user is viewing their tasks  
When the user clicks "New List"  
And enters the name "Work"  
And confirms creation  
Then a new list named "Work" is created  
And a TaskListCreated event is published  
And the list appears in the list selector
```

##### Scenario 2: Create a list with a duplicate name

```gherkin
Given a user already has a list named "Personal"  
When the user attempts to create another list named "Personal"  
Then validation fails  
And an error message indicates the name already exists  
And the list is not created  
And no TaskListCreated event is published
```

##### Scenario 3: Move a task to a different list

```gherkin
Given a user has a task in "Personal" list  
When the user selects "Move to List"  
And chooses "Work" list  
Then the task is moved to "Work" list  
And a TaskUpdated event is published  
And the task appears in "Work" list  
And is removed from "Personal" list
```

##### Scenario 4: Delete an empty list

```gherkin
Given a user has an empty list named "Old"  
When the user selects "Delete List"  
Then a confirmation dialog appears  
And upon confirmation, the list is deleted  
And a TaskListDeleted event is published  
And the list is removed from the list selector
```

##### Scenario 5: Delete a list with tasks

```gherkin
Given a user has a list "Archive" with 5 tasks  
When the user attempts to delete the list  
Then a dialog appears asking what to do with the tasks  
And offers options: "Move to Default" or "Delete Tasks"  
And upon selecting "Move to Default" and confirming  
Then all tasks are moved to the default list  
And the "Archive" list is deleted  
And a TaskListDeleted event is published
```

##### Scenario 6: Filter tasks by list

```gherkin
Given a user has tasks in multiple lists  
When the user selects "Work" list from the list selector  
Then only tasks in "Work" list are displayed  
And the list name is highlighted as active  
And task count for "Work" is shown
```

---

**Technical notes:**

- Consider implementing list colors or icons for visual distinction
- List ordering should be stable (alphabetical or user-defined)
- Default list cannot be deleted or renamed
- Implement efficient filtering when switching between lists
- Consider limiting the number of lists per user (e.g., max 20)

**Open questions:**

- Should lists support nesting (sub-lists)?
- Should there be a "smart list" feature (e.g., "All Overdue")?

---

### FR-TSK-006: Task reordering

**Priority:** <PriorityLabel priority="Should Have"/>

**Description:**  
Users should be able to manually reorder tasks within a list to prioritize, according to their preference. Reordering
provides user-defined ordering independent of status, priority, or due date.

**Preconditions:**

- User must be authenticated
- List must contain at least two tasks

**Postconditions:**

- Task positions are updated within the list
- New order is persisted
- TaskUpdated event is published (or TaskReordered if distinct)

**Business rules:**

- Tasks have stable order within each list
- Reordering only affects tasks within the same list
- Order is user-defined (not automatic)
- Reordering must be atomic
- Order positions are total (no gaps)
- Manual order persists until the user changes it

**User roles:**

- Authenticated User

**Related to:**

- Business Requirements: BR-001 (Portfolio Enhancement), BR-002 (User Productivity Enhancement), BR-005 (User Value
  Delivery)
- Domain Aggregates: Task, TaskList
- Domain Events: TaskUpdated (or TaskReordered)

**Dependencies:**

- FR-TSK-001 (Tasks must exist)

**Acceptance criteria:**

- Users can drag-and-drop tasks to reorder them
- Visual feedback shows the task being dragged
- Drop zones between tasks are indicated
- Task order is updated when dropped
- Other tasks shift to accommodate the moved task
- TaskUpdated event is published with the new position
- Order is persisted immediately
- Reordering can be canceled (ESC key or drop outside)
- Manual order is preserved when applying sort/filter

**User stories:**

- US-TSK-006-001: Reorder tasks via drag-and-drop
- US-TSK-006-002: Cancel reorder operation

### Scenarios

##### Scenario 1: Reorder tasks via drag-and-drop ("happy path")

```gherkin
Given a list contains tasks in order: A, B, C, D  
When the user drags task D to the position between A and B  
Then task D is visually lifted and follows the cursor  
And drop zones between tasks are highlighted  
And when dropped, the order becomes: A, D, B, C  
And a TaskUpdated event is published  
And the new order is persisted
```

##### Scenario 2: Move a task to the first position

```gherkin
Given a list contains tasks in order: A, B, C  
When the user drags task C to the first position  
Then the order becomes: C, A, B  
And a TaskUpdated event is published  
And the change is persisted
```

##### Scenario 3: Cancel reorder operation

```gherkin
Given a user starts dragging a task  
When the user presses the ESC key before dropping  
Then the drag operation is cancelled  
And the task returns to its original position  
And no TaskUpdated event is published
```

##### Scenario 4: Reorder persists across sort operations

```gherkin
Given a user has manually reordered tasks  
When the user applies a temporary sort (e.g., by due date)  
And then clears the sort  
Then the manual order is restored  
And tasks appear in the user-defined order
```

---

**Technical notes:**

- Store task order as an explicit position field (integer)
- Implement efficient reordering algorithm (update only affected positions)
- Use smooth animations for drag-and-drop feedback
- Support touch devices for reordering
- Consider keyboard-based reordering for accessibility
- Manual order should take precedence over automatic sorting

**Open questions:**

- Should there be alternative reordering mechanisms (move up/down buttons)?
- Should auto-sort disable manual ordering or coexist with it?

---

### FR-TSK-007: Task search and filtering

**Priority:** <PriorityLabel priority="Should Have"/>

**Description:**  
Users should be able to search tasks by title and description, and filter tasks by status, priority, due date, and list.
Search and filtering enable quick access to specific tasks in large task collections.

**Preconditions:**

- User must be authenticated
- User must have at least one task

**Postconditions:**

- Search/filter results are displayed
- Results update in real-time
- Search/filter can be cleared

**Business rules:**

- Search is case-insensitive
- Search matches partial strings in title and description
- Multiple filters can be applied simultaneously
- Filters are AND-ed (all filters must match)
- Empty search/filter shows all tasks
- Search/filter is scoped to the current list (or all lists)

**User roles:**

- Authenticated User

**Related to:**

- Business Requirements: BR-001 (Portfolio Enhancement), BR-002 (User Productivity Enhancement), BR-005 (User Value
  Delivery)
- Domain Aggregates: Task
- Domain Events: None (read-only operation)

**Dependencies:**

- FR-TSK-001 (Tasks must exist)

**Acceptance criteria:**

- User can enter a search query in a search field
- Search results update in real-time
- Matching text is highlighted in results
- Users can filter by status (Todo, In Progress, Done)
- Users can filter by priority (Low, Medium, High)
- Users can filter by due date range
- Users can filter by list
- Multiple filters can be applied together
- Search and filter can be cleared
- Result count is displayed

**User stories:**

- US-TSK-007-001: Search tasks by title
- US-TSK-007-002: Filter tasks by status
- US-TSK-007-003: Combine multiple filters
- US-TSK-007-004: Clear search/filter

### Scenarios

##### Scenario 1: Search tasks by title ("happy path")

```gherkin
Given a user has tasks with various titles  
When the user enters "grocery" in the search field  
Then all tasks with "grocery" in the title or description are displayed  
And the matching text "grocery" is highlighted  
And the result count is shown
```

##### Scenario 2: Filter tasks by status

```gherkin
Given a user has tasks with mixed statuses  
When the user selects "In Progress" from the status filter  
Then only tasks with status "In Progress" are displayed  
And the filter indicator shows "Status: In Progress"  
And the result count is updated
```

##### Scenario 3: Combine multiple filters

```gherkin
Given a user has tasks with various attributes  
When the user filters by status "Todo"  
And filters by priority "High"  
And filters by due date "This Week"  
Then only tasks matching all three criteria are displayed  
And all filter indicators are shown  
And the result count reflects the combined filters
```

##### Scenario 4: No search results

```gherkin
Given a user enters a search query  
When no tasks match the query  
Then a "No results found" message is displayed  
And the search field remains active  
And the user can modify the query
```

##### Scenario 5: Clear all filters

```gherkin
Given a user has multiple filters applied  
When the user clicks "Clear All Filters"  
Then all filters are removed  
And all tasks in the current list are displayed  
And the search field is cleared
```

##### Scenario 6: Filter overdue tasks

```gherkin
Given a user has tasks with various due dates  
When the user selects "Overdue" from the quick filters  
Then only tasks with due dates in the past are displayed  
And the overdue count is shown  
And tasks are sorted by how many days overdue
```

---

**Technical notes:**

- Implement debouncing for search input (e.g., 300ms)
- Use indexed search for performance with large task collections
- Consider implementing saved filters/views (future)
- Highlight matching text using markup or CSS
- Implement efficient filtering algorithm
- Store filter state in URL for the ability to be bookmarked (future)

**Open questions:**

- Should search history be saved?
- Should there be "smart filters" (e.g., "My Focus" = High priority + Due Soon)?

---

### FR-TSK-008: Calendar integration

**Priority:** <PriorityLabel priority="Should Have"/>

**Description:**  
Users should be able to create calendar events from tasks. This integration enables users to schedule time for task
completion and maintain both a task list and calendar view of their work.

**Preconditions:**

- User must be authenticated
- Task must exist
- Task should have a due date (recommended but not required)
- Calendar context must be available

**Postconditions:**

- EventCreationRequestedFromTask event is published
- Calendar context creates the event
- Task is optionally linked to the created event (future)

**Business rules:**

- Task title maps to event title
- Task description maps to event description
- Task due date maps to the event date/time
- Creating an event does not delete or complete the task
- Task and event remain separate entities
- One task can generate multiple events (if needed)
- Event creation is idempotent (repeated requests don't create duplicates)

**User roles:**

- Authenticated User

**Related to:**

- Business Requirements: BR-001 (Portfolio Enhancement), BR-002 (User Productivity Enhancement), BR-005 (User Value
  Delivery)
- Domain Aggregates: Task
- Domain Events: EventCreationRequestedFromTask (published), EventCreated (consumed from Calendar)

**Dependencies:**

- FR-TSK-001 (Task must exist)
- FR-TSK-004 (Due date recommended)
- Calendar context (lateral partnership)

**Acceptance criteria:**

- User can select "Create Event from Task"
- Task data is mapped to event fields
- EventCreationRequestedFromTask event is published with task data
- Calendar context receives event and creates calendar event
- User is notified when the event is created
- Task remains in task list (not deleted)
- If the task has no due date, the user is prompted to set a date/time for the event
- Task can optionally be marked as "Scheduled" (future)

**User stories:**

- US-TSK-008-001: Create an event from a task with a due date
- US-TSK-008-002: Create an event from a task without a due date
- US-TSK-008-003: View linked event from a task (future)

### Scenarios

##### Scenario 1: Create an event from a task with a due date ("happy path")

```gherkin
Given a user has a task titled "Meeting Preparation"  
And the task has due date "2025-11-20 14:00"  
When the user selects "Create Event from Task"  
Then an EventCreationRequestedFromTask event is published  
And the event data includes title "Meeting Preparation"  
And the event date is set to "2025-11-20 14:00"  
And the Calendar context creates the event  
And a notification confirms "Event created"  
And the task remains in the task list
```

##### Scenario 2: Create an event from a task without a due date

```gherkin
Given a user has a task titled "Review Documents"  
And the task has no due date  
When the user selects "Create Event from Task"  
Then a date/time picker dialog appears  
And the user selects "2025-11-21 10:00"  
And confirms  
Then an EventCreationRequestedFromTask event is published  
And the event is created for the selected date/time
```

##### Scenario 3: Event creation fails

```gherkin
Given a user attempts to create an event from a task  
When the Calendar context is unavailable  
Then an error message is displayed  
And the user is notified to try again later  
And no EventCreationRequestedFromTask event is published successfully
```

##### Scenario 4: Create an event with a description

```gherkin
Given a user has a task with title and description  
When the user creates an event from the task  
Then the task description is mapped to event description  
And both title and description appear in the created event
```

---

**Technical notes:**

- Use asynchronous event publishing for Calendar integration
- Implement retry logic for failed event creation requests
- Consider storing event ID on the task for bidirectional linking (future)
- Calendar context is responsible for event creation; Tasks context only requests
- Implement idempotency to prevent duplicate events

**Open questions:**

- Should completing the task also update the linked event (future)?
- Should deleting a task delete the linked event (future)?
- Should there be bidirectional sync between tasks and events?

---

### FR-TSK-009: Task completion tracking

**Priority:** <PriorityLabel priority="Must Have"/>

**Description:**  
The system must track task completion status and provide visual feedback for completed tasks. Completion tracking
enables users to see progress and maintain a sense of accomplishment.

**Preconditions:**

- User must be authenticated
- Task must exist

**Postconditions:**

- Task completion status is tracked
- Completion timestamp is recorded
- TaskCompleted event is published
- Completed tasks are visually distinct

**Business rules:**

- A task is considered "completed" when status is "Done"
- Completion timestamp is recorded when the task is marked as done
- Completed tasks remain visible (not automatically archived in MVP)
- Completed tasks can be reverted to incomplete
- Completion count/percentage can be calculated per list

**User roles:**

- Authenticated User

**Related to:**

- Business Requirements: BR-001 (Portfolio Enhancement), BR-002 (User Productivity Enhancement), BR-005 (User Value
  Delivery)
- Domain Aggregates: Task
- Domain Events: TaskCompleted

**Dependencies:**

- FR-TSK-002 (Task status lifecycle)

**Acceptance criteria:**

- Task is marked as completed when status changes to "Done"
- Completion timestamp is recorded
- TaskCompleted event is published
- Completed tasks display with strike-through or checkmark
- Users can view completed tasks separately or inline
- Completion statistics are available (e.g., "5 of 10 completed")
- Completed tasks can be hidden/shown via toggle
- Reverting to incomplete clears the completion timestamp

**User stories:**

- US-TSK-009-001: Mark task as completed
- US-TSK-009-002: View completion statistics
- US-TSK-009-003: Toggle completed tasks visibility
- US-TSK-009-004: Revert a completed task

### Scenarios

##### Scenario 1: Mark a task as completed ("happy path")

```gherkin
Given a user has a task with status "In Progress"  
When the user marks the task as "Done"  
Then the task is marked as completed  
And completion timestamp is recorded  
And a TaskCompleted event is published  
And the task displays with strike-through  
And a checkmark icon appears
```

##### Scenario 2: View completion statistics

```gherkin
Given a user has 10 tasks in a list  
And 5 tasks are completed  
When the user views the list  
Then the completion statistics show "5 of 10 completed (50%)"  
And a progress bar shows 50% completion
```

##### Scenario 3: Hide completed tasks

```gherkin
Given a user has both completed and incomplete tasks  
When the user toggles "Hide Completed"  
Then completed tasks are hidden from view  
And only incomplete tasks are displayed  
And the toggle state is saved
```

##### Scenario 4: Show completed tasks

```gherkin
Given a user has hidden completed tasks  
When the user toggles "Show Completed"  
Then completed tasks reappear in the list  
And are visually distinct with strike-through  
And appear after incomplete tasks (or in order)
```

##### Scenario 5: Revert a completed task to incomplete

```gherkin
Given a user has a completed task  
When the user changes the status from "Done" to "Todo"  
Then the task is marked as incomplete  
And completion timestamp is cleared  
And a TaskStatusChanged event is published  
And the strike-through is removed  
And the checkmark icon is removed
```

##### Scenario 6: Completion timestamp persists

```gherkin
Given a user has completed a task  
When the user views the task details  
Then the completion timestamp is displayed  
And shows when the task was completed
```

---

**Technical notes:**

- Store completion timestamp as ISO 8601 format
- Implement efficient filtering for completed/incomplete tasks
- Consider implementing completion history/archive (future)
- Completion statistics should update in real-time
- Implement toggle state persistence per list

**Open questions:**

- Should the completed tasks be automatically archived after a certain time?
- Should there be a "completed tasks" archive separate from active tasks?

---

## Cross-feature considerations

### Interactions between features

- **Task Management ↔ Status Lifecycle:** Creating tasks initializes with default status; status changes update task
  state
- **Task Management ↔ Priority Management:** Creating tasks initializes with a default priority; priority changes are
  independent
- **Status Lifecycle ↔ Completion Tracking:** Changing status to "Done" triggers completion tracking
- **Due Date Management ↔ Calendar Integration:** Tasks with due dates can be converted to calendar events
- **Task Lists ↔ Search/Filtering:** Search and filters are scoped to lists; moving tasks between lists affects
  visibility
- **Task Reordering ↔ Search/Filtering:** Manual order persists when filters are cleared
- **All Features ↔ Task Management:** All features depend on basic task CRUD operations

### Shared business rules

1. **User Scoping:** All tasks and task lists must be scoped to the authenticated user
2. **Title Validation:** All task titles must be non-empty and length-bounded (1–200 characters)
3. **Unique Identifiers:** All tasks and lists must have unique IDs system-wide
4. **Atomicity:** All state changes must be atomic—either fully succeed or fully fail
5. **Event Publishing:** Events must be published after successful persistence
6. **Status Consistency:** Each task has exactly one status at any time

### Data consistency requirements

- **Strong Consistency:** Task CRUD operations, status changes, priority changes require strong consistency
- **Eventual Consistency:** Calendar integration can be eventually consistent (asynchronous event creation)
- **Transactional Boundaries:** Task (or TaskList) aggregate is the transactional boundary
- **Event Publishing:** Events must be published after successful persistence (transactional outbox pattern)
- **Real-Time Updates:** Task widgets on a dashboard should update in real-time via event subscriptions

---

## Business constraints impact

### BC-001: Budget

Tasks management must operate within zero-cost infrastructure constraints:

- **Task Storage:** Use a free-tier database (PostgreSQL via Railway, Supabase, or local)
- **Search:** Use the database full-text search capabilities (no Elasticsearch or paid search service)
- **Calendar Integration:** Use event bus for integration (no paid message queue initially)
- **Notifications:** Use browser notifications (no paid push notification service)

### BC-002: Timeline

Tasks management is on a critical path for MVP (3–6 months):

- **Must Have features** (FR-TSK-001, 002, 003, 004, 009) required for MVP
- **Should Have features** (FR-TSK-005, 006, 007, 008) enhance UX but can be simplified or deferred
- Prioritize core CRUD and status lifecycle for initial release
- Defer advanced features like calendar integration and complex search to post-MVP

### BC-003: Resources

Single-developer constraints affect Tasks management:

- **Leverage UI Libraries:** Use existing components (Angular Material) for date pickers, checkboxes
- **Simplify Lists:** Start with a flat list structure (defer hierarchical lists)
- **Automate Testing:** Heavy investment in unit tests for status lifecycle and completion tracking
- **Incremental Development:** Build core CRUD first, then status/priority, then advanced features

### BC-004: Technology stack

Tasks management aligns with the chosen stack:

- **Frontend:** Angular components for task list, filters, date pickers (Angular Material UI)
- **Backend:** Spring Boot REST APIs for task/list CRUD
- **Database:** PostgreSQL with indexes for efficient filtering/search
- **Events:** Spring Events initially; design for future Kafka/RabbitMQ migration
- **Integration:** Event-driven integration with Calendar context

---

## Success metrics alignment

Tasks management contributes to the following success metrics from BR-001 through BR-008:

### BR-003: Technical metrics

| Metric                | Target        | Tasks contribution                                           |
|-----------------------|---------------|--------------------------------------------------------------|
| **Page Load Time**    | < 2 seconds   | Efficient task list rendering, lazy loading                  |
| **API Response Time** | < 200ms (p95) | Optimized task CRUD operations, indexed search               |
| **Test Coverage**     | > 80%         | Comprehensive unit/integration tests for all FR-TSK features |

### BR-001: Portfolio quality metrics

| Metric                         | Target             | Tasks contribution                                             |
|--------------------------------|--------------------|----------------------------------------------------------------|
| **Architecture Documentation** | All views complete | Task aggregate design, status lifecycle, event flows           |
| **Code Quality Score**         | No critical issues | DDD patterns (aggregates, entities, value objects), validation |

### BR-002, BR-005: User experience metrics

| Metric                   | Target            | Tasks contribution                                   |
|--------------------------|-------------------|------------------------------------------------------|
| **Task Completion Rate** | > 95%             | Intuitive task creation, status changes, completion  |
| **Mobile Usability**     | Fully Responsive  | Responsive task list, touch-friendly controls        |
| **Accessibility Score**  | WCAG 2.1 Level AA | Keyboard navigation, screen reader support for tasks |
| **User Satisfaction**    | > 4.0/5.0         | Simple, visual task management, progress tracking    |

---

## Traceability matrix

| Feature    | Business Req           | Domain Events                                     | User Stories               |
|------------|------------------------|---------------------------------------------------|----------------------------|
| FR-TSK-001 | BR-001, BR-002, BR-005 | TaskCreated, TaskUpdated, TaskDeleted             | US-TSK-001-001/002/003/004 |
| FR-TSK-002 | BR-001, BR-002, BR-005 | TaskStatusChanged, TaskCompleted                  | US-TSK-002-001/002/003     |
| FR-TSK-003 | BR-001, BR-002, BR-005 | TaskPriorityChanged                               | US-TSK-003-001/002/003     |
| FR-TSK-004 | BR-001, BR-002, BR-005 | TaskUpdated                                       | US-TSK-004-001/002/003/004 |
| FR-TSK-005 | BR-001, BR-002, BR-005 | TaskListCreated, TaskListRenamed, TaskListDeleted | US-TSK-005-001/002/003/004 |
| FR-TSK-006 | BR-001, BR-002, BR-005 | TaskUpdated                                       | US-TSK-006-001/002         |
| FR-TSK-007 | BR-001, BR-002, BR-005 | None (read-only)                                  | US-TSK-007-001/002/003/004 |
| FR-TSK-008 | BR-001, BR-002, BR-005 | EventCreationRequestedFromTask                    | US-TSK-008-001/002         |
| FR-TSK-009 | BR-001, BR-002, BR-005 | TaskCompleted                                     | US-TSK-009-001/002/003/004 |
